{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project1\\\\trap-monitor\\\\frontend\\\\src\\\\InsectTrapMonitor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { AlertTriangle, Bug, Calendar, MapPin, MessageCircleWarning, Plus, Trash2, QrCode, Camera, Download, FileChartColumnIncreasing } from 'lucide-react';\nimport { trapApi } from './api/trapApi';\nimport AddTrapButton from './component/AddTrapButton';\nimport TrapDisplayForm from './component/TrapDisplayForm';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InsectTrapMonitor = () => {\n  _s();\n  const navigate = useNavigate();\n  const getIssueCount = () => {\n    const issues = JSON.parse(localStorage.getItem('trapIssues') || '[]');\n    return issues.length;\n  };\n  const reportIssue = (trapId, issueData) => {\n    // Get existing issues from localStorage\n    const existingIssues = JSON.parse(localStorage.getItem('trapIssues') || '[]');\n\n    // Add new issue\n    const newIssues = [...existingIssues, issueData];\n\n    // Save to localStorage\n    localStorage.setItem('trapIssues', JSON.stringify(newIssues));\n\n    // Optional: Show success message\n    alert('บันทึกการแจ้งปัญหาเรียบร้อยแล้ว');\n  };\n  const updateTrap = async (id, updateData) => {\n    try {\n      // เรียก API เพื่ออัพเดทข้อมูล\n      await trapApi.updateTrap(id, updateData);\n\n      // อัพเดท state หลังจากบันทึกสำเร็จ\n      setTraps(prevTraps => prevTraps.map(trap => trap._id === id ? {\n        ...trap,\n        ...updateData\n      } : trap));\n      alert('บันทึกข้อมูลเรียบร้อย');\n    } catch (error) {\n      console.error('Error:', error);\n      throw error; // ส่ง error ไปให้ component ลูกจัดการ\n    }\n  };\n  const calculateDaysRemaining = (installDate, expiryDate) => {\n    if (!installDate || !expiryDate) return 0;\n    const today = new Date();\n    const expiry = new Date(expiryDate);\n    const diffTime = expiry - today;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays > 0 ? diffDays : 0;\n  };\n  const [traps, setTraps] = useState([]);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingTrap, setEditingTrap] = useState(null);\n  const [showQRScanner, setShowQRScanner] = useState(false);\n  const [showQRGenerator, setShowQRGenerator] = useState(null);\n  const [scanResult, setScanResult] = useState('');\n  const [updateForm, setUpdateForm] = useState({\n    notes: '',\n    status: 'normal'\n  });\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [newTrap, setNewTrap] = useState({\n    name: '',\n    location: '',\n    type: 'เหลือง',\n    notes: '',\n    installDate: new Date().toISOString().split('T')[0],\n    expiryDate: ''\n  });\n  const getStatusColor = status => {\n    switch (status) {\n      case 'normal':\n        return 'bg-green-100 text-green-800 border-green-200';\n      case 'warning':\n        return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'critical':\n        return 'bg-red-100 text-red-800 border-red-200';\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n  const getStatusText = status => {\n    switch (status) {\n      case 'normal':\n        return 'ปกติ';\n      case 'warning':\n        return 'ต้องติดตาม';\n      case 'critical':\n        return 'เร่งด่วน';\n      default:\n        return 'ไม่ทราบ';\n    }\n  };\n\n  // QR Code Functions\n  const generateQRCode = text => {\n    // Simple QR code generation using a free API\n    return `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(text)}`;\n  };\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment'\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        setIsScanning(true);\n      }\n    } catch (err) {\n      console.error('Error accessing camera:', err);\n      alert('ไม่สามารถเข้าถึงกล้องได้ กรุณาตรวจสอบการอนุญาต');\n    }\n  };\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      const tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n      videoRef.current.srcObject = null;\n      setIsScanning(false);\n    }\n  };\n  const captureQRCode = () => {\n    if (videoRef.current && canvasRef.current) {\n      const canvas = canvasRef.current;\n      const context = canvas.getContext('2d');\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n      context.drawImage(videoRef.current, 0, 0);\n\n      // In a real app, you'd use a QR code detection library here\n      // For demo purposes, we'll simulate QR code detection\n      const simulatedQRCodes = ['TRAP001', 'TRAP002', 'TRAP003'];\n      const randomQR = simulatedQRCodes[Math.floor(Math.random() * simulatedQRCodes.length)];\n      setScanResult(randomQR);\n\n      // Find trap by QR code\n      const foundTrap = traps.find(trap => trap.qrCode === randomQR);\n      if (foundTrap) {\n        setUpdateForm({\n          notes: foundTrap.notes,\n          status: foundTrap.status\n        });\n      }\n      stopCamera();\n    }\n  };\n  const updateTrapFromQR = () => {\n    if (scanResult) {\n      const trapIndex = traps.findIndex(trap => trap.qrCode === scanResult);\n      if (trapIndex !== -1) {\n        const updatedTraps = [...traps];\n        updatedTraps[trapIndex] = {\n          ...updatedTraps[trapIndex],\n          notes: updateForm.notes,\n          status: updateForm.status,\n          lastCheck: new Date().toISOString().split('T')[0]\n        };\n        setTraps(updatedTraps);\n        setScanResult('');\n        setShowQRScanner(false);\n        setUpdateForm({\n          notes: '',\n          status: 'normal'\n        });\n        alert('อัปเดตข้อมูลกับดักเรียบร้อยแล้ว!');\n      }\n    }\n  };\n  const downloadQRCode = (qrUrl, trapName) => {\n    const link = document.createElement('a');\n    link.href = qrUrl;\n    link.download = `QR-${trapName.replace(/\\s+/g, '-')}.png`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'normal':\n        return /*#__PURE__*/_jsxDEV(Bug, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 29\n        }, this);\n      case 'warning':\n        return /*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 30\n        }, this);\n      case 'critical':\n        return /*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 31\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Bug, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchTraps = async () => {\n      try {\n        setLoading(true);\n        const data = await trapApi.getAllTraps();\n        setTraps(data);\n      } catch (error) {\n        setError('Failed to fetch traps');\n        console.error('Error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchTraps();\n  }, []);\n  const addTrap = async () => {\n    if (newTrap.name && newTrap.location) {\n      try {\n        setLoading(true);\n        const qrCode = `TRAP${String(Date.now()).slice(-6)}`;\n        const daysRemaining = calculateDaysRemaining(newTrap.installDate, newTrap.expiryDate);\n        const trapData = {\n          ...newTrap,\n          status: 'normal',\n          lastCheck: new Date().toISOString().split('T')[0],\n          daysRemaining,\n          efficiency: 100,\n          qrCode\n        };\n        const createdTrap = await trapApi.createTrap(trapData);\n        setTraps([...traps, createdTrap]);\n        setNewTrap({\n          name: '',\n          location: '',\n          type: 'เหลือง',\n          notes: '',\n          installDate: new Date().toISOString().split('T')[0],\n          expiryDate: ''\n        });\n        setShowAddForm(false);\n      } catch (error) {\n        setError('Failed to create trap');\n        console.error('Error:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n  const deleteTrap = async id => {\n    try {\n      await trapApi.deleteTrap(id);\n      setTraps(prevTraps => prevTraps.filter(trap => trap._id !== id));\n      alert('ลบกับดักเรียบร้อยแล้ว');\n    } catch (error) {\n      console.error('Error:', error);\n      throw error; // ส่ง error ไปให้ component ลูกจัดการ\n    }\n  };\n  const criticalTraps = traps.filter(trap => trap.status === 'critical').length;\n  const warningTraps = traps.filter(trap => trap.status === 'warning').length;\n  const totalInsects = traps.reduce;\n  const avgEfficiency = Math.round(traps.reduce((sum, trap) => sum + trap.efficiency, 0) / traps.length);\n  const expiringTraps = traps.filter(trap => {\n    const daysRemaining = calculateDaysRemaining(trap.installDate, trap.expiryDate);\n    return daysRemaining <= 1;\n  }).length;\n  const handleAddTrap = async trapData => {\n    try {\n      setLoading(true);\n      const createdTrap = await trapApi.createTrap(trapData);\n      setTraps([...traps, createdTrap]);\n    } catch (error) {\n      setError('Failed to create trap');\n      console.error('Error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg p-6 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-3xl font-bold text-gray-800 flex items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(Bug, {\n                className: \"w-8 h-8 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this), \"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E15\\u0E34\\u0E14\\u0E15\\u0E32\\u0E21\\u0E01\\u0E32\\u0E27\\u0E14\\u0E31\\u0E01\\u0E41\\u0E21\\u0E25\\u0E07\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 mt-2\",\n              children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E41\\u0E25\\u0E30\\u0E15\\u0E34\\u0E14\\u0E15\\u0E32\\u0E21\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\\u0E01\\u0E31\\u0E1A\\u0E14\\u0E31\\u0E01\\u0E41\\u0E21\\u0E25\\u0E07\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowQRScanner(true),\n              className: \"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(Camera, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this), \"\\u0E2A\\u0E41\\u0E01\\u0E19 QR Code\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(AddTrapButton, {\n              onAdd: handleAddTrap\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-6 mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-orange-600\",\n                children: traps.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 15\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-orange-100 p-3 rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(Calendar, {\n                className: \"w-6 h-6 text-orange-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => window.open('/notify', '_blank'),\n          className: \"cursor-pointer hover:shadow-lg transition-shadow\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-md p-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-600\",\n                  children: \"\\u0E41\\u0E08\\u0E49\\u0E07\\u0E40\\u0E15\\u0E37\\u0E2D\\u0E19\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-3xl font-bold text-red-600\",\n                  children: getIssueCount()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-red-100 p-3 rounded-lg\",\n                children: /*#__PURE__*/_jsxDEV(AlertTriangle, {\n                  className: \"w-6 h-6 text-red-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"\\u0E2B\\u0E21\\u0E14\\u0E2D\\u0E32\\u0E22\\u0E38\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-green-600\",\n                children: expiringTraps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-100 p-3 rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(MessageCircleWarning, {\n                className: \"w-6 h-6 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"\\u0E1B\\u0E23\\u0E30\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E20\\u0E32\\u0E1E\\u0E40\\u0E09\\u0E25\\u0E35\\u0E48\\u0E22\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-purple-600\",\n                children: [avgEfficiency, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-purple-100 p-3 rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(FileChartColumnIncreasing, {\n                className: \"w-6 h-6 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), showQRScanner && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl p-6 w-full max-w-md mx-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold mb-4\",\n            children: \"\\u0E2A\\u0E41\\u0E01\\u0E19 QR Code \\u0E01\\u0E31\\u0E1A\\u0E14\\u0E31\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this), !scanResult ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-black rounded-lg overflow-hidden\",\n              children: /*#__PURE__*/_jsxDEV(\"video\", {\n                ref: videoRef,\n                autoPlay: true,\n                playsInline: true,\n                className: \"w-full h-64 object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: [!isScanning ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startCamera,\n                className: \"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 25\n                }, this), \"\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E01\\u0E25\\u0E49\\u0E2D\\u0E07\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: captureQRCode,\n                className: \"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg\",\n                children: \"\\u0E2A\\u0E41\\u0E01\\u0E19 QR Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  stopCamera();\n                  setShowQRScanner(false);\n                  setScanResult('');\n                },\n                className: \"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg\",\n                children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-50 border border-green-200 rounded-lg p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-green-600 mb-1\",\n                children: \"QR Code \\u0E17\\u0E35\\u0E48\\u0E2A\\u0E41\\u0E01\\u0E19\\u0E44\\u0E14\\u0E49:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-bold text-green-800\",\n                children: scanResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this), traps.find(t => t.qrCode === scanResult) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600 mt-1\",\n                children: traps.find(t => t.qrCode === scanResult).name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: updateForm.status,\n                onChange: e => setUpdateForm({\n                  ...updateForm,\n                  status: e.target.value\n                }),\n                className: \"w-full p-3 border rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: updateForm.status,\n                onChange: e => setUpdateForm({\n                  ...updateForm,\n                  status: e.target.value\n                }),\n                className: \"w-full p-3 border rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"normal\",\n                  children: \"\\u0E1B\\u0E01\\u0E15\\u0E34\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"warning\",\n                  children: \"\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E15\\u0E34\\u0E14\\u0E15\\u0E32\\u0E21\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"critical\",\n                  children: \"\\u0E40\\u0E23\\u0E48\\u0E07\\u0E14\\u0E48\\u0E27\\u0E19\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                placeholder: \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\",\n                value: updateForm.notes,\n                onChange: e => setUpdateForm({\n                  ...updateForm,\n                  notes: e.target.value\n                }),\n                className: \"w-full p-3 border rounded-lg h-20\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: updateTrapFromQR,\n                className: \"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg\",\n                children: \"\\u0E2D\\u0E31\\u0E1B\\u0E40\\u0E14\\u0E15\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setScanResult('');\n                  setShowQRScanner(false);\n                  setUpdateForm({\n                    notes: '',\n                    status: 'normal'\n                  });\n                },\n                className: \"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg\",\n                children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 11\n      }, this), showQRGenerator && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl p-6 w-full max-w-sm mx-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold mb-4\",\n            children: [\"QR Code - \", showQRGenerator.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: generateQRCode(showQRGenerator.qrCode),\n              alt: \"QR Code\",\n              className: \"mx-auto mb-4 border rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-4\",\n              children: [\"QR Code: \", showQRGenerator.qrCode]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => downloadQRCode(generateQRCode(showQRGenerator.qrCode), showQRGenerator.name),\n                className: \"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 21\n                }, this), \"\\u0E14\\u0E32\\u0E27\\u0E19\\u0E4C\\u0E42\\u0E2B\\u0E25\\u0E14\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowQRGenerator(null),\n                className: \"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg\",\n                children: \"\\u0E1B\\u0E34\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid lg:grid-cols-2 gap-6\",\n        children: traps.map(trap => /*#__PURE__*/_jsxDEV(TrapDisplayForm, {\n          trap: trap,\n          onDelete: deleteTrap,\n          onUpdate: updateTrap,\n          reportIssue: reportIssue,\n          getStatusColor: getStatusColor,\n          getStatusIcon: getStatusIcon,\n          getStatusText: getStatusText,\n          calculateDaysRemaining: calculateDaysRemaining,\n          generateQRCode: generateQRCode,\n          downloadQRCode: downloadQRCode\n        }, trap._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 9\n      }, this), traps.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12\",\n        children: [/*#__PURE__*/_jsxDEV(Bug, {\n          className: \"w-16 h-16 text-gray-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-600 mb-2\",\n          children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E01\\u0E31\\u0E1A\\u0E14\\u0E31\\u0E01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 mb-4\",\n          children: \"\\u0E40\\u0E23\\u0E34\\u0E48\\u0E21\\u0E15\\u0E49\\u0E19\\u0E14\\u0E49\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E01\\u0E31\\u0E1A\\u0E14\\u0E31\\u0E01\\u0E41\\u0E23\\u0E01\\u0E02\\u0E2D\\u0E07\\u0E04\\u0E38\\u0E13\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 283,\n    columnNumber: 5\n  }, this);\n};\n_s(InsectTrapMonitor, \"EqMi9fyY+1y0KUd5PT9zsTWMH6Q=\", false, function () {\n  return [useNavigate];\n});\n_c = InsectTrapMonitor;\nexport default InsectTrapMonitor;\nvar _c;\n$RefreshReg$(_c, \"InsectTrapMonitor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","AlertTriangle","Bug","Calendar","MapPin","MessageCircleWarning","Plus","Trash2","QrCode","Camera","Download","FileChartColumnIncreasing","trapApi","AddTrapButton","TrapDisplayForm","useNavigate","jsxDEV","_jsxDEV","InsectTrapMonitor","_s","navigate","getIssueCount","issues","JSON","parse","localStorage","getItem","length","reportIssue","trapId","issueData","existingIssues","newIssues","setItem","stringify","alert","updateTrap","id","updateData","setTraps","prevTraps","map","trap","_id","error","console","calculateDaysRemaining","installDate","expiryDate","today","Date","expiry","diffTime","diffDays","Math","ceil","traps","showAddForm","setShowAddForm","editingTrap","setEditingTrap","showQRScanner","setShowQRScanner","showQRGenerator","setShowQRGenerator","scanResult","setScanResult","updateForm","setUpdateForm","notes","status","videoRef","canvasRef","isScanning","setIsScanning","newTrap","setNewTrap","name","location","type","toISOString","split","getStatusColor","getStatusText","generateQRCode","text","encodeURIComponent","startCamera","stream","navigator","mediaDevices","getUserMedia","video","facingMode","current","srcObject","err","stopCamera","tracks","getTracks","forEach","track","stop","captureQRCode","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","simulatedQRCodes","randomQR","floor","random","foundTrap","find","qrCode","updateTrapFromQR","trapIndex","findIndex","updatedTraps","lastCheck","downloadQRCode","qrUrl","trapName","link","document","createElement","href","download","replace","body","appendChild","click","removeChild","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","loading","setLoading","setError","fetchTraps","data","getAllTraps","addTrap","String","now","slice","daysRemaining","trapData","efficiency","createdTrap","createTrap","deleteTrap","filter","criticalTraps","warningTraps","totalInsects","reduce","avgEfficiency","round","sum","expiringTraps","handleAddTrap","children","onClick","onAdd","window","open","ref","autoPlay","playsInline","t","value","onChange","e","target","placeholder","src","alt","onDelete","onUpdate","_c","$RefreshReg$"],"sources":["C:/Project1/trap-monitor/frontend/src/InsectTrapMonitor.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { AlertTriangle, Bug, Calendar, MapPin, MessageCircleWarning, Plus, Trash2, QrCode, Camera, Download, FileChartColumnIncreasing } from 'lucide-react';\r\nimport { trapApi } from './api/trapApi';\r\nimport AddTrapButton from './component/AddTrapButton';\r\nimport TrapDisplayForm from './component/TrapDisplayForm';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst InsectTrapMonitor = () => {\r\n\r\n  const navigate = useNavigate();\r\n  const getIssueCount = () => {\r\n    const issues = JSON.parse(localStorage.getItem('trapIssues') || '[]');\r\n    return issues.length;\r\n  };\r\n\r\n  const reportIssue = (trapId, issueData) => {\r\n  // Get existing issues from localStorage\r\n  const existingIssues = JSON.parse(localStorage.getItem('trapIssues') || '[]');\r\n  \r\n  // Add new issue\r\n  const newIssues = [...existingIssues, issueData];\r\n  \r\n  // Save to localStorage\r\n  localStorage.setItem('trapIssues', JSON.stringify(newIssues));\r\n  \r\n  // Optional: Show success message\r\n  alert('บันทึกการแจ้งปัญหาเรียบร้อยแล้ว');\r\n};\r\n\r\n  const updateTrap = async (id, updateData) => {\r\n  try {\r\n    // เรียก API เพื่ออัพเดทข้อมูล\r\n    await trapApi.updateTrap(id, updateData);\r\n    \r\n    // อัพเดท state หลังจากบันทึกสำเร็จ\r\n    setTraps(prevTraps => \r\n      prevTraps.map(trap => \r\n        trap._id === id ? { ...trap, ...updateData } : trap\r\n      )\r\n    );\r\n    \r\n    alert('บันทึกข้อมูลเรียบร้อย');\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    throw error; // ส่ง error ไปให้ component ลูกจัดการ\r\n  }\r\n};\r\n\r\n  const calculateDaysRemaining = (installDate, expiryDate) => {\r\n  if (!installDate || !expiryDate) return 0;\r\n  const today = new Date();\r\n  const expiry = new Date(expiryDate);\r\n  const diffTime = expiry - today;\r\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n  return diffDays > 0 ? diffDays : 0;\r\n};\r\n\r\n  const [traps, setTraps] = useState([]);\r\n\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [editingTrap, setEditingTrap] = useState(null);\r\n  const [showQRScanner, setShowQRScanner] = useState(false);\r\n  const [showQRGenerator, setShowQRGenerator] = useState(null);\r\n  const [scanResult, setScanResult] = useState('');\r\n  const [updateForm, setUpdateForm] = useState({\r\n    notes: '',\r\n    status: 'normal'\r\n  });\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [newTrap, setNewTrap] = useState({\r\n    name: '',\r\n    location: '',\r\n    type: 'เหลือง',\r\n    notes: '',\r\n    installDate: new Date().toISOString().split('T')[0],\r\n    expiryDate: ''\r\n  });\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'normal': return 'bg-green-100 text-green-800 border-green-200';\r\n      case 'warning': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n      case 'critical': return 'bg-red-100 text-red-800 border-red-200';\r\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'normal': return 'ปกติ';\r\n      case 'warning': return 'ต้องติดตาม';\r\n      case 'critical': return 'เร่งด่วน';\r\n      default: return 'ไม่ทราบ';\r\n    }\r\n  };\r\n\r\n  // QR Code Functions\r\n  const generateQRCode = (text) => {\r\n    // Simple QR code generation using a free API\r\n    return `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(text)}`;\r\n  };\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { facingMode: 'environment' } \r\n      });\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        setIsScanning(true);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error accessing camera:', err);\r\n      alert('ไม่สามารถเข้าถึงกล้องได้ กรุณาตรวจสอบการอนุญาต');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      const tracks = videoRef.current.srcObject.getTracks();\r\n      tracks.forEach(track => track.stop());\r\n      videoRef.current.srcObject = null;\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  const captureQRCode = () => {\r\n    if (videoRef.current && canvasRef.current) {\r\n      const canvas = canvasRef.current;\r\n      const context = canvas.getContext('2d');\r\n      canvas.width = videoRef.current.videoWidth;\r\n      canvas.height = videoRef.current.videoHeight;\r\n      context.drawImage(videoRef.current, 0, 0);\r\n      \r\n      // In a real app, you'd use a QR code detection library here\r\n      // For demo purposes, we'll simulate QR code detection\r\n      const simulatedQRCodes = ['TRAP001', 'TRAP002', 'TRAP003'];\r\n      const randomQR = simulatedQRCodes[Math.floor(Math.random() * simulatedQRCodes.length)];\r\n      setScanResult(randomQR);\r\n      \r\n      // Find trap by QR code\r\n      const foundTrap = traps.find(trap => trap.qrCode === randomQR);\r\n      if (foundTrap) {\r\n        setUpdateForm({\r\n          notes: foundTrap.notes,\r\n          status: foundTrap.status\r\n        });\r\n      }\r\n      \r\n      stopCamera();\r\n    }\r\n  };\r\n\r\n  const updateTrapFromQR = () => {\r\n    if (scanResult) {\r\n      const trapIndex = traps.findIndex(trap => trap.qrCode === scanResult);\r\n      if (trapIndex !== -1) {\r\n        const updatedTraps = [...traps];\r\n        updatedTraps[trapIndex] = {\r\n          ...updatedTraps[trapIndex],\r\n          notes: updateForm.notes,\r\n          status: updateForm.status,\r\n          lastCheck: new Date().toISOString().split('T')[0]\r\n        };\r\n        setTraps(updatedTraps);\r\n        setScanResult('');\r\n        setShowQRScanner(false);\r\n        setUpdateForm({ notes: '', status: 'normal' });\r\n        alert('อัปเดตข้อมูลกับดักเรียบร้อยแล้ว!');\r\n      }\r\n    }\r\n  };\r\n\r\n  const downloadQRCode = (qrUrl, trapName) => {\r\n    const link = document.createElement('a');\r\n    link.href = qrUrl;\r\n    link.download = `QR-${trapName.replace(/\\s+/g, '-')}.png`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'normal': return <Bug className=\"w-4 h-4\" />;\r\n      case 'warning': return <AlertTriangle className=\"w-4 h-4\" />;\r\n      case 'critical': return <AlertTriangle className=\"w-4 h-4\" />;\r\n      default: return <Bug className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchTraps = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const data = await trapApi.getAllTraps();\r\n        setTraps(data);\r\n      } catch (error) {\r\n        setError('Failed to fetch traps');\r\n        console.error('Error:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTraps();\r\n  }, []);\r\n\r\n  const addTrap = async () => {\r\n  if (newTrap.name && newTrap.location) {\r\n    try {\r\n      setLoading(true);\r\n      const qrCode = `TRAP${String(Date.now()).slice(-6)}`;\r\n      const daysRemaining = calculateDaysRemaining(newTrap.installDate, newTrap.expiryDate);\r\n      \r\n      const trapData = {\r\n        ...newTrap,\r\n        status: 'normal',\r\n        lastCheck: new Date().toISOString().split('T')[0],\r\n        daysRemaining,\r\n        efficiency: 100,\r\n        qrCode\r\n      };\r\n      \r\n      const createdTrap = await trapApi.createTrap(trapData);\r\n      setTraps([...traps, createdTrap]);\r\n      setNewTrap({\r\n        name: '',\r\n        location: '',\r\n        type: 'เหลือง',\r\n        notes: '',\r\n        installDate: new Date().toISOString().split('T')[0],\r\n        expiryDate: ''\r\n      });\r\n      setShowAddForm(false);\r\n    } catch (error) {\r\n      setError('Failed to create trap');\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n};\r\n\r\n  const deleteTrap = async (id) => {\r\n  try {\r\n    await trapApi.deleteTrap(id);\r\n    setTraps(prevTraps => prevTraps.filter(trap => trap._id !== id));\r\n    alert('ลบกับดักเรียบร้อยแล้ว');\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    throw error; // ส่ง error ไปให้ component ลูกจัดการ\r\n  }\r\n};\r\n\r\n  const criticalTraps = traps.filter(trap => trap.status === 'critical').length;\r\n  const warningTraps = traps.filter(trap => trap.status === 'warning').length;\r\n  const totalInsects = traps.reduce\r\n  const avgEfficiency = Math.round(traps.reduce((sum, trap) => sum + trap.efficiency, 0) / traps.length);\r\n  const expiringTraps = traps.filter(trap => {\r\n  const daysRemaining = calculateDaysRemaining(trap.installDate, trap.expiryDate);\r\n  return daysRemaining <= 1; }).length;\r\n\r\n  const handleAddTrap = async (trapData) => {\r\n  try {\r\n    setLoading(true);\r\n    const createdTrap = await trapApi.createTrap(trapData);\r\n    setTraps([...traps, createdTrap]);\r\n  } catch (error) {\r\n    setError('Failed to create trap');\r\n    console.error('Error:', error);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-800 flex items-center gap-3\">\r\n                <Bug className=\"w-8 h-8 text-green-600\" />\r\n                ระบบติดตามกาวดักแมลง\r\n              </h1>\r\n              <p className=\"text-gray-600 mt-2\">จัดการและติดตามสถานะกับดักแมลงทั้งหมด</p>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowQRScanner(true)}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors\"\r\n              >\r\n                <Camera className=\"w-5 h-5\" />\r\n                สแกน QR Code\r\n              </button>\r\n                <AddTrapButton onAdd={handleAddTrap} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-3\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600\">ทั้งหมด</p>\r\n              <p className=\"text-3xl font-bold text-orange-600\">{traps.length}</p> {/* แก้จาก expiringTraps เป็น traps.length */}\r\n            </div>\r\n            <div className=\"bg-orange-100 p-3 rounded-lg\">\r\n              <Calendar className=\"w-6 h-6 text-orange-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div \r\n          onClick={() => window.open ('/notify', '_blank')}\r\n          className=\"cursor-pointer hover:shadow-lg transition-shadow\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600\">แจ้งเตือน</p>\r\n              <p className=\"text-3xl font-bold text-red-600\">{getIssueCount()}</p>\r\n            </div>\r\n            <div className=\"bg-red-100 p-3 rounded-lg\">\r\n              <AlertTriangle className=\"w-6 h-6 text-red-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n       </div>\r\n        \r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600\">หมดอายุ</p>\r\n              <p className=\"text-3xl font-bold text-green-600\">{expiringTraps}</p>\r\n            </div>\r\n            <div className=\"bg-green-100 p-3 rounded-lg\">\r\n              <MessageCircleWarning className=\"w-6 h-6 text-green-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600\">ประสิทธิภาพเฉลี่ย</p>\r\n              <p className=\"text-3xl font-bold text-purple-600\">{avgEfficiency}%</p>\r\n            </div>\r\n            <div className=\"bg-purple-100 p-3 rounded-lg\">\r\n              <FileChartColumnIncreasing className=\"w-6 h-6 text-purple-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n        {/* QR Scanner Modal */}\r\n        {showQRScanner && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\r\n              <h3 className=\"text-xl font-bold mb-4\">สแกน QR Code กับดัก</h3>\r\n              \r\n              {!scanResult ? (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"bg-black rounded-lg overflow-hidden\">\r\n                    <video\r\n                      ref={videoRef}\r\n                      autoPlay\r\n                      playsInline\r\n                      className=\"w-full h-64 object-cover\"\r\n                    />\r\n                  </div>\r\n                  <canvas ref={canvasRef} className=\"hidden\" />\r\n                  \r\n                  <div className=\"flex gap-3\">\r\n                    {!isScanning ? (\r\n                      <button\r\n                        onClick={startCamera}\r\n                        className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2\"\r\n                      >\r\n                        <Camera className=\"w-4 h-4\" />\r\n                        เปิดกล้อง\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        onClick={captureQRCode}\r\n                        className=\"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg\"\r\n                      >\r\n                        สแกน QR Code\r\n                      </button>\r\n                    )}\r\n                    <button\r\n                      onClick={() => {\r\n                        stopCamera();\r\n                        setShowQRScanner(false);\r\n                        setScanResult('');\r\n                      }}\r\n                      className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg\"\r\n                    >\r\n                      ยกเลิก\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                    <div className=\"text-sm text-green-600 mb-1\">QR Code ที่สแกนได้:</div>\r\n                    <div className=\"font-bold text-green-800\">{scanResult}</div>\r\n                    {traps.find(t => t.qrCode === scanResult) && (\r\n                      <div className=\"text-sm text-gray-600 mt-1\">\r\n                        {traps.find(t => t.qrCode === scanResult).name}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    <input\r\n                      value={updateForm.status}\r\n                      onChange={(e) => setUpdateForm({...updateForm, status: e.target.value})}\r\n                      className=\"w-full p-3 border rounded-lg\"\r\n                    />\r\n                    \r\n                    <select\r\n                      value={updateForm.status}\r\n                      onChange={(e) => setUpdateForm({...updateForm, status: e.target.value})}\r\n                      className=\"w-full p-3 border rounded-lg\"\r\n                    >\r\n                      <option value=\"normal\">ปกติ</option>\r\n                      <option value=\"warning\">ต้องติดตาม</option>\r\n                      <option value=\"critical\">เร่งด่วน</option>\r\n                    </select>\r\n                    \r\n                    <textarea\r\n                      placeholder=\"หมายเหตุ\"\r\n                      value={updateForm.notes}\r\n                      onChange={(e) => setUpdateForm({...updateForm, notes: e.target.value})}\r\n                      className=\"w-full p-3 border rounded-lg h-20\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex gap-3\">\r\n                    <button\r\n                      onClick={updateTrapFromQR}\r\n                      className=\"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg\"\r\n                    >\r\n                      อัปเดตข้อมูล\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setScanResult('');\r\n                        setShowQRScanner(false);\r\n                        setUpdateForm({notes: '', status: 'normal' });\r\n                      }}\r\n                      className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg\"\r\n                    >\r\n                      ยกเลิก\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* QR Code Generator Modal */}\r\n        {showQRGenerator && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white rounded-xl p-6 w-full max-w-sm mx-4\">\r\n              <h3 className=\"text-xl font-bold mb-4\">QR Code - {showQRGenerator.name}</h3>\r\n              <div className=\"text-center\">\r\n                <img \r\n                  src={generateQRCode(showQRGenerator.qrCode)} \r\n                  alt=\"QR Code\" \r\n                  className=\"mx-auto mb-4 border rounded-lg\"\r\n                />\r\n                <div className=\"text-sm text-gray-600 mb-4\">\r\n                  QR Code: {showQRGenerator.qrCode}\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    onClick={() => downloadQRCode(generateQRCode(showQRGenerator.qrCode), showQRGenerator.name)}\r\n                    className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2\"\r\n                  >\r\n                    <Download className=\"w-4 h-4\" />\r\n                    ดาวน์โหลด\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setShowQRGenerator(null)}\r\n                    className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg\"\r\n                  >\r\n                    ปิด\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Traps Grid */}\r\n        <div className=\"grid lg:grid-cols-2 gap-6\">\r\n          {traps.map(trap => (\r\n            <TrapDisplayForm\r\n              key={trap._id}\r\n              trap={trap}\r\n              onDelete={deleteTrap}\r\n              onUpdate={updateTrap}\r\n              reportIssue={reportIssue}\r\n              getStatusColor={getStatusColor}\r\n              getStatusIcon={getStatusIcon}\r\n              getStatusText={getStatusText}\r\n              calculateDaysRemaining={calculateDaysRemaining}\r\n              generateQRCode={generateQRCode}\r\n              downloadQRCode={downloadQRCode}     \r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {traps.length === 0 && (\r\n          <div className=\"text-center py-12\">\r\n            <Bug className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-600 mb-2\">ยังไม่มีกับดัก</h3>\r\n            <p className=\"text-gray-500 mb-4\">เริ่มต้นด้วยการเพิ่มกับดักแรกของคุณ</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InsectTrapMonitor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}